# 代码工匠

> 本文为自己对张建飞的《代码精进之路-从码农到工匠》的读书笔记，内容全部为书中的总结

## 命名规范：

|类型|规范|
|----|----|
|类名|大驼峰|
|方法名|小驼峰|
|包|全部小写|
|常量|全部大写|
|枚举|以ENUM或Type结尾|
|抽象类|以Abstract开头|
|异常类|以Exception结尾|
|实现类|以Impl结尾|
|测试类|以测试的类开头，以Test结尾|

## 日志规范

|级别|含义|场合||
|----|----|----|----|
|ERROR|表示不能自己恢复的错误，需要立即被关注和解决|数据库操作失败，I/O错误、未知的系统错误NPE或者OOM等|需要打印全面的上下文，便于排查|
|WARN|对可以预知的业务问题|参数校验不通过，没有访问权限等业务异常|短时间产生过多的warn日志也是一种系统不健康表现，需要配置适当的报警阀值|
|INFO|用于记录系统的基本运行过程和运行状态|包括系统状态变化日志、业务流程的核心处理、关键动作和业务流程的状态变化|

## 异常规范

异常处理，很多应用没有统一的异常处理规范，增加了人为的复杂性，具体体现在以下两个方面：
- 代码中到处充斥者异常捕获的try/catch的代码，搞乱了代码结构。把错误处理和正常流程混为一谈，严重影响代码可读性
-  异常处理不统一，有的场景对外直接抛出异常，有的场景对外返回错误码，这种不一致让服务调用方摸不着头脑。增加服务的使用成本和沟通成本
  
针对以上问题，可以在业务系统中设定两个异常，分别是BizException和SystemException，而且这两个异常都是Unchecked Exception
对于业务异常和系统异常要做统一的异常处理，类似于AOP，在应用处理请求的切面上进行异常处理收敛

## 错误码

对于错误类型，可以做以下约定：P代表参数异常，B代表业务异常，S代表系统异常
示例如下
|错误类型|错误码约定|举例|
|----|----|----|
|参数异常|P_XX_XX|P_Customer_NameIsNull:客户姓名不能为空|
|业务异常|B_XX_XX|B_Customer_NameAlreadyExist:客户姓名已存在|
|系统异常|S_XX_XX|S_Unknow_Error:未知系统错误|

## 设计原则
SOLID 是由5个设计原则开头字母的缩写，其本身就由稳定的意思

- SRP（Single Response Principle）单一职责原则
- OCP（Open Close Principle）开闭原则
- LSP（Liskov Substitution PrincipPrinciple）里氏替换原则
- ISP(Interface Segregation Principle) 接口隔离原则
- DIP（Dependency Inversion Principle）依赖导致原则
